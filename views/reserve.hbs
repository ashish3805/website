{{# extend 'pre-content' }}
{{# if reserve }}
<div class="alert alert-info" role="alert">
  <div class="container">
    <strong>To pre-register your <abbr title="Interplanetary Address">IPA</abbr>, you need to first login or create an account.
  </div>
</div>
{{/ if }}

{{# if error }}
<div class="alert alert-error" role="alert">
  <div class="container">
    {{ error }}
  </div>
</div>
{{/ if }}
{{/ extend }}

<div class="row">
  <div class="col-lg-4 section">
    <h1>{{# if available }}Your{{ else }}Requested{{/ if }} Interplanetary Address <code>{{ address }}</code> is {{# if available }}available!{{ else }}not available.{{/ if }}</h1>
    {{# if available }}
      <h4>Complete the registration form to reserve it.</h4>
    {{ else }}
      <a href="/">Click here</a> to try again with a new address.
    {{/ if }}
  </div>
  {{# if available }}
    <div class="col-lg-4">
      <div class="page-header">
        <h3>Your details</h3>
      </div>
      <form method="post" action="/reserve">
        <input type="hidden" name="_csrf" value="{{ csrfToken }}">
        <input type="hidden" name="cluster" value="{{ cluster }}">
        <input type="hidden" name="domain" value="{{ domain }}">
        <div class="form-group">
          <label for="name">Name</label>
          {{# if user }}
            <p class="form-control-static">{{ user.name }}</p>
            <input type="hidden" name="name" value="{{ user.name }}">
          {{ else }}
            <input type="name" class="form-control" id="name" placeholder="Name" name="name" required>
          {{/ if }}
        </div>
        <div class="form-group">
          <label for="email">Email</label>
          {{# if user }}
            <p class="form-control-static">{{ user.email }}</p>
            <input type="hidden" name="email" value="{{ user.email }}">
          {{ else }}
            <input type="email" class="form-control" id="email" placeholder="Email" name="email" required>
          {{/ if }}
        </div>
        {{# unless user }}
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" class="form-control" id="password" placeholder="Password" name="password" required>
          </div>
        {{/ unless }}
        <button type="submit" class="btn btn-primary btn-block">Pre-register</button>
      </form>
    </div>
    <div class="col-lg-4 section">
      {{> addresses }}
    </div>
  {{/ if }}
</div>
